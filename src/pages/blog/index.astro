---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<Layout>
    <div class="max-w-screen-xl bg-gray-100 shadow-2xl mx-auto p-10 flex flex-col gap-6 flex-1">
        {sortedPosts.map((post) => (
            <div class="p-4 mx-auto">
                <a href={`/blog/${post.slug}`} class="font-serif font-semibold">
                    <div class="flex flex-col gap-3">
                        <h2 class="text-3xl hover:text-slate-900">
                            {post.data.title}
                        </h2>
                        <div class="flex flex-wrap gap-2 mb-2">
                            {post.data.tags.map((tag) => (
                                <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-sm">
                                    {tag}
                                </span>
                            ))}
                        </div>
                        <p class="font-sans text-gray-500 border-t-1 border-b-1 border-gray-300 py-2 mb-2">
                            {post.data.date.toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })}
                        </p>
                        <div class="font-sans text-gray-700 text-xl">
                            {post.data.description}
                        </div>
                    </div>
                </a>
            </div>
        ))}
    </div>
</Layout>