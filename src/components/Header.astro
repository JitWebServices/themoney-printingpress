---
const { currentPath } = Astro.props;

const normalize = (path: string) => path.replace(/\/$/, "") || "/";
const isActive = (href: string) => normalize(currentPath) === normalize(href);

// Check if we're on the home page
const isHomePage = normalize(currentPath) === "/";
---

<div style="background-color: #F2ECE1;">
	<!-- Banner Logo as Header -->
	<a href="/">
		<div class="flex justify-center pt-2 pb-1">
			{isHomePage ? (
				<!-- Full banner for home page -->
				<img 
					src="/images/logo-printing-press.svg" 
					alt="The Money-Printing Press - Wealth through the ages, by Marcos Vega" 
					class="w-full max-w-6xl h-auto"
					onerror="this.style.display='none'; this.parentElement.innerHTML='<h1 class=\'text-4xl font-bold text-center py-8 victoria-font\' style=\'color: #9e383d;\'>The Money-Printing Press</h1>';"
				/>
			) : (
				<!-- Minimal banner for all other pages -->
				<img 
					src="/images/TMPP-banner-minimal.svg" 
					alt="The Money-Printing Press" 
					class="w-full max-w-2xl h-auto"
					onerror="this.style.display='none'; this.parentElement.innerHTML='<h1 class=\'text-2xl font-bold text-center py-4 victoria-font\' style=\'color: #9e383d;\'>The Money-Printing Press</h1>';"
				/>
			)}
		</div>
	</a>
	
	<!-- Navigation with updated color scheme -->
	<div style="background: linear-gradient(135deg, #9C272E 0%, #B83339 25%, #9C272E 50%, #B83339 75%, #9C272E 100%);">
		<div class="w-full max-w-screen-xl mx-auto flex justify-center py-1">
			<a
				href="/"
				class={`text-lg px-4 py-2 mx-1 transition-all duration-300 ease-in-out ${isActive("/") ? "nav-active" : "nav-inactive"}`}
				style={isActive("/") ? "color: #f5f5dc; background: linear-gradient(135deg, #8b2635, #6d1f28);" : "color: white;"}
			>
				Home
			</a>

			<a
				href="/archive"
				class={`text-lg px-4 py-2 mx-1 transition-all duration-300 ease-in-out ${isActive("/archive") ? "nav-active" : "nav-inactive"}`}
				style={isActive("/archive") ? "color: #f5f5dc; background: linear-gradient(135deg, #8b2635, #6d1f28);" : "color: white;"}
			>
				Archive
			</a>

			<a
				href="/resources"
				class={`text-lg px-4 py-2 mx-1 transition-all duration-300 ease-in-out ${isActive("/resources") ? "nav-active" : "nav-inactive"}`}
				style={isActive("/resources") ? "color: #f5f5dc; background: linear-gradient(135deg, #8b2635, #6d1f28);" : "color: white;"}
			>
				Resources
			</a>

			<a
				href="/about"
				class={`text-lg px-4 py-2 mx-1 transition-all duration-300 ease-in-out ${isActive("/about") ? "nav-active" : "nav-inactive"}`}
				style={isActive("/about") ? "color: #f5f5dc; background: linear-gradient(135deg, #8b2635, #6d1f28);" : "color: white;"}
			>
				About
			</a>
		</div>
	</div>
</div>

<style>
	.victoria-font {
		font-family: 'Playfair Display', 'Times New Roman', serif;
	}
	
	/* Smooth hover effects */
	.nav-inactive:hover {
		background: rgba(255, 255, 255, 0.08) !important;
		transform: translateY(-1px);
	}
	
	.nav-active:hover {
		transform: translateY(-1px);
		box-shadow: inset 0 1px 3px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2) !important;
	}
</style>